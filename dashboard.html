<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:Arial;margin:0;background:#f1f5f9}
.dark{background:#0f172a;color:#fff}
header{background:#2563eb;color:#fff;padding:15px}
.card{background:#fff;padding:20px;border-radius:12px}
.dark .card{background:#1e293b}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;padding:20px}
</style>
</head>
<body>

<header>
  <h2 id="title"></h2>
  <button onclick="toggleLang()">ğŸŒ</button>
</header>

<div class="grid">
  <div class="card">
    <h4 id="totalTxt"></h4>
    <h1 id="totalPayments"></h1>
  </div>
  <div class="card">
    <canvas id="chart"></canvas>
  </div>
</div>

<script src="assets/js/settings-system.js"></script>
<script src="assets/js/storage.js"></script>
<script>
const s=getSettings();
title.innerText=t("dashboard");
totalTxt.innerText=t("totalPayments");

const stats=getDashboardStats();
totalPayments.innerText=formatCurrency(stats.totalPayments);

/* Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ù„ØºØ© Ø³Ø±ÙŠØ¹ */
function toggleLang(){
  s.lang=s.lang==="ar"?"en":"ar";
  saveSettings(s);
  location.reload();
}

/* Chart */
new Chart(chart,{
  type:"bar",
  data:{
    labels:["Payments"],
    datasets:[{
      data:[stats.totalPayments],
      backgroundColor:"#2563eb"
    }]
  }
});
</script>

</body>
</html>
