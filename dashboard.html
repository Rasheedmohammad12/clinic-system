<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Clinic System | Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#f4f7fb;--card:#fff;--text:#0f172a;--muted:#64748b;
      --primary:#2563eb;--primary-2:#1e40af;
      --border:rgba(15,23,42,.08);
      --shadow:0 10px 30px rgba(2,6,23,.08);
      --shadow2:0 8px 20px rgba(2,6,23,.06);
      --radius:16px;
    }
    body.dark{
      --bg:#0b1220;--card:#0f1b32;--text:#e5e7eb;--muted:#9ca3af;
      --primary:#60a5fa;--primary-2:#3b82f6;
      --border:rgba(255,255,255,.08);
      --shadow:0 12px 36px rgba(0,0,0,.35);
      --shadow2:0 10px 24px rgba(0,0,0,.28);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Segoe UI,Tahoma;background:var(--bg);color:var(--text)}
    .topbar{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#fff;padding:14px}
    .topbar-inner{max-width:1200px;margin:auto;display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;gap:10px;align-items:center}
    .brand-badge{width:40px;height:40px;border-radius:14px;background:rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{background:rgba(255,255,255,.2);border:none;border-radius:12px;color:#fff;padding:8px 12px;cursor:pointer}
    .wrap{max-width:1200px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
    .card-head{padding:16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between}
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;padding:16px}
    .stat{border:1px solid var(--border);border-radius:14px;padding:14px}
    .value{font-size:28px;font-weight:800}
    table{width:100%;border-collapse:collapse}
    th,td{padding:12px;border-bottom:1px solid var(--border)}
  </style>
</head>

<body>

<script>
  const user = JSON.parse(localStorage.getItem("user"));
  if (localStorage.getItem("loggedIn") !== "true" || !user) {
    window.location.href = "index.html";
  }
</script>

<div class="topbar">
  <div class="topbar-inner">
    <div class="brand">
      <div class="brand-badge">ğŸ¥</div>
      <div>
        <b>Clinic System</b><br>
        <small>Dashboard</small>
      </div>
    </div>

    <div class="actions">
      <span id="uiUser"></span>
      <button class="btn" id="logoutBtn">ğŸšª Logout</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="grid">

    <!-- LEFT -->
    <div>
      <div class="card">
        <div class="card-head">
          <b>Overview</b>
        </div>

        <div class="stats">
          <div class="stat">
            <div>Patients</div>
            <div class="value" id="patientsCount">0</div>
          </div>
          <div class="stat">
            <div>Sessions</div>
            <div class="value">0</div>
          </div>
          <div class="stat">
            <div>Payments</div>
            <div class="value">0</div>
          </div>
        </div>
      </div>

      <!-- PATIENTS TABLE -->
      <div class="card" style="margin-top:18px">
        <div class="card-head">
          <b>Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø±Ø¶Ù‰</b>
        </div>

        <div style="padding:16px;overflow-x:auto">
          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø§Ù„Ø¹Ù…Ø±</th>
                <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              </tr>
            </thead>
            <tbody id="patientsTable"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="card" style="padding:16px">
      <b>Quick Actions</b>
      <p>Patients / Sessions / Payments</p>
    </div>

  </div>
</div>

<script>
  document.getElementById("uiUser").innerText = user.name;

  document.getElementById("logoutBtn").onclick = () => {
    localStorage.removeItem("loggedIn");
    window.location.href = "index.html";
  };

  const patients = JSON.parse(localStorage.getItem("patients")) || [
    {name:"Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",age:30,phone:"0791234567",date:"2026-02-01",status:"Ù…Ø³ØªÙ‚Ø±"},
    {name:"Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ",age:25,phone:"0789876543",date:"2026-02-03",status:"Ù‚ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"}
  ];
  localStorage.setItem("patients", JSON.stringify(patients));

  const tbody = document.getElementById("patientsTable");
  patients.forEach(p=>{
    tbody.innerHTML += `
      <tr>
        <td>${p.name}</td>
        <td>${p.age}</td>
        <td>${p.phone}</td>
        <td>${p.date}</td>
        <td>${p.status}</td>
      </tr>`;
  });

  document.getElementById("patientsCount").innerText = patients.length;
</script>

</body>
</html>
