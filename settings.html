<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</title>

<style>
body{
  font-family: Arial;
  margin: 0;
  background: #f1f5f9;
}
.dark{
  background:#0f172a;
  color:#fff;
}
form{
  background:#fff;
  padding:20px;
  max-width:420px;
  margin:40px auto;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
.dark form{background:#1e293b}

h3{
  margin-top:0;
  margin-bottom:15px;
}

label{
  display:block;
  margin-top:12px;
  font-size:14px;
}

input, select, button{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  font-size:14px;
}

button{
  background:#2563eb;
  color:#fff;
  border:none;
  font-weight:bold;
  cursor:pointer;
}

.pin-box{
  margin-top:25px;
  padding-top:15px;
  border-top:1px dashed #cbd5e1;
}
</style>
</head>

<body>

<form id="settingsForm">

  <h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>

  <!-- LANGUAGE -->
  <label>Ø§Ù„Ù„ØºØ©</label>
  <select id="lang">
    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
    <option value="en">English</option>
  </select>

  <!-- THEME -->
  <label>Ø§Ù„Ù…Ø¸Ù‡Ø±</label>
  <select id="theme">
    <option value="light">ÙØ§ØªØ­</option>
    <option value="dark">Ø¯Ø§ÙƒÙ†</option>
  </select>

  <!-- CURRENCY -->
  <label>Ø§Ù„Ø¹Ù…Ù„Ø©</label>
  <select id="currency">
    <option value="JOD">JOD</option>
    <option value="USD">USD</option>
    <option value="ILS">ILS</option>
  </select>

  <!-- PAYMENTS PIN -->
  <div class="pin-box">
    <h3>ğŸ” Ø±Ù…Ø² Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h3>

    <label>Ø±Ù…Ø² Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</label>
    <input
      type="password"
      id="paymentPin"
      placeholder="Ø±Ù…Ø² Ø³Ø±ÙŠ (4 Ø£Ø±Ù‚Ø§Ù… Ø£Ùˆ Ø£ÙƒØ«Ø±)"
      inputmode="numeric"
    >
  </div>

  <button type="submit">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>

</form>

<script>
/* =====================
   Ø¹Ù†Ø§ØµØ±
===================== */
const form = document.getElementById("settingsForm");
const paymentPinInput = document.getElementById("paymentPin");

const lang = document.getElementById("lang");
const theme = document.getElementById("theme");
const currency = document.getElementById("currency");

/* =====================
   ØªØ·Ø¨ÙŠÙ‚ ÙÙˆØ±ÙŠ Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
===================== */
function applyNow(){
  const savedLang = localStorage.getItem("lang") || "ar";
  const savedTheme = localStorage.getItem("theme") || "light";

  document.documentElement.lang = savedLang;
  document.documentElement.dir = savedLang === "ar" ? "rtl" : "ltr";
  document.body.classList.toggle("dark", savedTheme === "dark");
}

/* =====================
   ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
===================== */
lang.value = localStorage.getItem("lang") || "ar";
theme.value = localStorage.getItem("theme") || "light";
currency.value = localStorage.getItem("currency") || "JOD";

applyNow();

/* =====================
   Ø­ÙØ¸
===================== */
form.addEventListener("submit", e => {
  e.preventDefault();

  // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
  localStorage.setItem("lang", lang.value);
  localStorage.setItem("theme", theme.value);
  localStorage.setItem("currency", currency.value);

  // Ø­ÙØ¸ PIN (Ø¥Ø°Ø§ Ø§Ù†ÙƒØªØ¨)
  if (paymentPinInput.value) {
    if (paymentPinInput.value.length < 4) {
      alert("Ø§Ù„Ø±Ù…Ø² Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
      return;
    }

    // âœ… Ù…ÙØªØ§Ø­ Ù…ÙˆØ­Ù‘Ø¯
    localStorage.setItem("paymentPin", paymentPinInput.value);
  }

  // âœ… ØªØ·Ø¨ÙŠÙ‚ ÙÙˆØ±ÙŠ
  applyNow();

  alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­");
  paymentPinInput.value = "";
});
</script>

</body>
</html>
